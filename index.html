<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#FDFBF7" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="學習島" />
    <title>Island Study Log</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <style>
      /* Global Scrollbar */
      .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

      /* Prevent pull-to-refresh on mobile to feel more like an app */
      body {
        overscroll-behavior-y: none;
      }

      /* Keyframe Animations */
      @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
      }
      .animate-shimmer {
          background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
          background-size: 200% 100%;
          animation: shimmer 2s infinite;
      }

      @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-4px) rotate(-2deg); }
          20%, 40%, 60%, 80% { transform: translateX(4px) rotate(2deg); }
      }
      .animate-shake {
          animation: shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
      }

      @keyframes alarmRing {
          0% { transform: rotate(0); }
          10% { transform: rotate(-15deg); }
          20% { transform: rotate(15deg); }
          30% { transform: rotate(-15deg); }
          40% { transform: rotate(15deg); }
          50% { transform: rotate(0); }
          100% { transform: rotate(0); }
      }
      .animate-alarm-ring {
          animation: alarmRing 1s infinite ease-in-out;
          transform-origin: top center;
      }
      
      @keyframes highlightPulse {
          0% { background-color: rgba(252, 211, 77, 0.1); }
          50% { background-color: rgba(252, 211, 77, 0.8); }
          100% { background-color: rgba(252, 211, 77, 0.1); }
      }
      .row-highlight {
          animation: highlightPulse 1.5s ease-in-out 2;
      }

      @keyframes goldenBreath {
          0% { box-shadow: inset 0 0 10px rgba(251, 191, 36, 0.1); background-color: rgba(255, 251, 235, 1); }
          50% { box-shadow: inset 0 0 20px rgba(251, 191, 36, 0.6); background-color: rgba(254, 243, 199, 1); }
          100% { box-shadow: inset 0 0 10px rgba(251, 191, 36, 0.1); background-color: rgba(255, 251, 235, 1); }
      }
      .animate-golden-breath {
          animation: goldenBreath 3s infinite ease-in-out;
          border-top: 2px solid #FCD34D !important;
          border-bottom: 2px solid #FCD34D !important;
      }

      @keyframes breathe {
          0% { transform: scale(1); box-shadow: 0 0 0 rgba(140, 209, 157, 0); border-color: #E5E7EB; }
          50% { transform: scale(1.03); box-shadow: 0 0 30px rgba(140, 209, 157, 0.5); border-color: #8CD19D; }
          100% { transform: scale(1); box-shadow: 0 0 0 rgba(140, 209, 157, 0); border-color: #E5E7EB; }
      }
      .animate-breathe {
          animation: breathe 8s ease-in-out infinite;
      }

      @keyframes wave {
          0%, 100% { height: 10%; }
          50% { height: 100%; }
      }
      .animate-wave {
          animation: wave 1s ease-in-out infinite;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.4/",
    "react": "https://esm.sh/react@^19.2.4",
    "lucide-react": "https://esm.sh/lucide-react@^0.563.0",
    "recharts": "https://esm.sh/recharts@^3.7.0",
    "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
    "vite": "https://esm.sh/vite@^7.3.1",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
</head>
  <body class="bg-[#FDFBF7]">
    <div id="root"></div>
    <script>
      // Initialize mermaid on load with a colorful theme
      document.addEventListener('DOMContentLoaded', function() {
        if (window.mermaid) {
          mermaid.initialize({ 
            startOnLoad: false, 
            theme: 'default', // Changed from 'neutral' to 'default' for colors
            securityLevel: 'loose',
            fontFamily: 'ui-sans-serif, system-ui, sans-serif'
          });
        }
      });
    </script>
    <!-- This script tag is essential for Vite deployment -->
    <script type="module" src="/index.tsx"></script>
  </body>
</html>